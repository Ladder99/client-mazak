# client setup
# read by the ladder99 adapter and relay services.

client:
  name: Demo # not used yet
  # tell server what timezone to report results in, what timezone schedules are in etc
  timezone: America/Chicago # currently just used by jobboss driver and availability js

adapter:
  devices:
    - id: m # must match id in agent.xml
      name: Micro # must match name in agent.cfg and agent.xml
      sources:
        - module: micro # defines inputs and outputs with yaml files
          driver: micro # adapter plugin - manages protocol and payload
      # connection for agent to connect to. then relay reads from that agent.
      destinations:
        - protocol: shdr
          host: adapter # must match agent.cfg value
          port: 7890 # must match agent.cfg value

# specify agents we want relay to get data from.
# warning: don't change the agent keys (eg micro) as used to synch data with db.
relay:
  agents:
    micro:
      url: http://agent:5000
      retention: 2d # eg could clear all unneeded data at midnight - then vacuum analyze db?
      # without a list of devices here, relay would read all available in agent
      devices:
        m:
          alias: Microcontroller # as displayed in grafana - can change
          # can override settings per dataitem -
          dataitems:
            m-os:
              retention: 1d

    mazak:
      url: http://mtconnect.mazakcorp.com:5717
      devices:
        M...?:
          alias: Mazak Mill # for display in grafana etc
          # off: true # set true to hide device in dashboards, pause recording, etc
          # etc

    nist:
      url: https://smstestbed.nist.gov/vds # agie, mazak, hurco machines
      devices:
        GFAgie01:
          alias: Agie Micron

        Mazak01:
          alias: Mazak Integrix

        Mazak03:
          alias: Mazak QuickTurn

        Hurco01:
          alias: Hurco VMX24-1

        Hurco02:
          alias: Hurco VMX24-2

        Hurco03:
          alias: Hurco VMX24-3

        Hurco04:
          alias: Hurco VMX24-4

        Hurco06:
          alias: Hurco VMX64

    silex:
      url: http://10.1.10.187:5000
      devices:
        FBR-100AN:
          alias: Silex FBR

    fanuc:
      url: http://10.1.10.145:5000
      # just record all devices and dataitems

paths: # list of regexp path step translations - canonicalize paths
  #. better to just do plain string replacements? yeahhhh
  #. better to keep these with each device, above
  # mazak
  base: axes
  # silex
  axes/x1: axes/x
  axes/y1: axes/y
  axes/z1: axes/z
  axes/c1: axes/c
  load\[n\.load-x_p1\]: load
  load\[n\.load-y_p1\]: load
  load\[n\.load-z_p1\]: load
  load\[n\.loadcurrentpercent-x_p1\]: load[pct]
  load\[n\.loadcurrentpercent-y_p1\]: load[pct]
  load\[n\.loadcurrentpercent-z_p1\]: load[pct]
  interface_state\[n\.dryrun-1\]: interface_state[dryrun]
  interface_state\[n\.feedrate-1\]: interface_state[feedrate]
  interface_state\[n\.m00-1\]: interface_state[m00]
  interface_state\[n\.m01-1\]: interface_state[m01]
  # fanuc

# path step translations - for future relay branch
translations:
  # mazak mill
  5fd88408-7811-3c6b-5400-11f4026b6890#a: axes
  5fd88408-7811-3c6b-5400-11f4026b6890#Cload: load-index
  5fd88408-7811-3c6b-5400-11f4026b6890#Sload: load-spindle
