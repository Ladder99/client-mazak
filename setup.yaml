# client setup
# read by the ladder99 adapter and relay services.

client:
  name: Demo # not used yet
  # tell server what timezone to report results in, what timezone schedules are in etc
  timezone: America/Chicago # currently just used by jobboss driver and availability js

# adapter reads this section to setup devices with their drivers,
# which publish data to the agent via SHDR over TCP.
# the agent is a service that communicates over the tcp channel specified in agent.cfg.
adapter:
  devices:
    - id: m # must match id in agent.xml
      name: Micro # must match name in agent.cfg and agent.xml
      sources:
        - module: micro # defines inputs and outputs with yaml files
          driver: micro # adapter plugin - manages protocol and payload
      # connection for agent. then relay reads from that agent.
      connection:
        host: adapter # must match agent.cfg value
        port: 7890 # must match agent.cfg value

# relay reads this section to know what agents to read data from.
# warning: don't change the agent keys (eg micro) as they are used to synch data with db.
relay:
  # retention: 1wk # could specify a top-level retention for all agents here
  agents:
    - id: main # this is an arbitrary id we assign to each agent, used by the db - don't change!
      url: http://agent:5000 # url to the agent
      # ignore: true # can specify this to turn agent recording on/off
      # retention: 2d # could clear all unneeded data at midnight - then vacuum analyze db?
      # without a list of devices here, relay would read all available in agent
      devices:
        - id: m
          alias: Microcontroller # as displayed in grafana - can change. without this, just use device name?
          # ignore: true # can specify this to turn device recording on/off
          # could override settings per dataitem -
          # dataitems:
          #   - id: m-os
          #     retention: 1d

    - id: mazak5701 # assigned agent id - don't change!
      url: http://mtconnect.mazakcorp.com:5701
      devices:
        - id: M12345
          alias: Mazak Mill 12345

    - id: mazak5717 # assigned agent id - don't change!
      url: http://mtconnect.mazakcorp.com:5717
      devices:
        - id: M12346
          alias: Mazak Mill 12346 # for display in grafana etc
          # ignore: true # set true to hide device in dashboards, pause recording, etc
          # dataitem step translations
          translations:
            a: axes
            Cload: load-index
            Sload: load-spindle

    - id: mazak5719 # assigned agent id - don't change!
      url: http://mtconnect.mazakcorp.com:5719
      devices:
        - id: HCN001
          alias: Mazak Mill HCN001

    - id: nist # assigned agent id - don't change!
      url: https://smstestbed.nist.gov/vds # agie, mazak, hurco machines
      devices:
        - id: GFAgie01
          alias: Agie Micron

        - id: Mazak01
          alias: Mazak Integrix

        - id: Mazak03
          alias: Mazak QuickTurn

        - id: Hurco01
          alias: Hurco VMX24-1

        - id: Hurco02
          alias: Hurco VMX24-2

        - id: Hurco03
          alias: Hurco VMX24-3

        - id: Hurco04
          alias: Hurco VMX24-4

        - id: Hurco06
          alias: Hurco VMX64

    - id: silex # assigned agent id - don't change!
      url: http://10.1.10.187:5000
      devices:
        - id: FBR-100AN
          alias: Silex FBR
          # could specify path step translations per agent, or higher up, or any level
          translations:
            x1: x
            y1: y
            z1: z
            c1: c
            load[n.load-x_p1]: load
            load[n.load-y_p1]: load
            load[n.load-z_p1]: load
            load[n.loadcurrentpercent-x_p1]: load[pct]
            load[n.loadcurrentpercent-y_p1]: load[pct]
            load[n.loadcurrentpercent-z_p1]: load[pct]
            interface_state[n.dryrun-1]: interface_state[dryrun]
            interface_state[n.feedrate-1]: interface_state[feedrate]
            interface_state[n.m00-1]: interface_state[m00]
            interface_state[n.m01-1]: interface_state[m01]

    - id: fanuc # assigned agent id - don't change
      url: http://10.1.10.145:5000
      ignore: true # don't record this agent yet
      # just record all devices and dataitems in this agent
